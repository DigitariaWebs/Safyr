import {
  EmployeePayrollVariables,
  PayrollPeriod,
  CoherenceCheck,
} from "@/lib/types";

export interface Period {
  id: string;
  month: number;
  year: number;
  label: string;
}

// Mock Payroll Periods
export const mockPayrollPeriods: PayrollPeriod[] = [
  {
    id: "period-2024-12",
    month: 12,
    year: 2024,
    label: "Décembre 2024",
    status: "review",
    startDate: new Date("2024-12-01"),
    endDate: new Date("2024-12-31"),
    totalEmployees: 45,
    importedEmployees: 42,
    validatedEmployees: 38,
    totalErrors: 3,
    totalWarnings: 8,
    createdBy: "Marie Dubois",
    createdAt: new Date("2024-12-01"),
  },
  {
    id: "period-2024-11",
    month: 11,
    year: 2024,
    label: "Novembre 2024",
    status: "closed",
    startDate: new Date("2024-11-01"),
    endDate: new Date("2024-11-30"),
    totalEmployees: 45,
    importedEmployees: 45,
    validatedEmployees: 45,
    totalErrors: 0,
    totalWarnings: 0,
    createdBy: "Marie Dubois",
    createdAt: new Date("2024-11-01"),
    closedBy: "Jean Martin",
    closedAt: new Date("2024-11-28"),
  },
  {
    id: "period-2024-10",
    month: 10,
    year: 2024,
    label: "Octobre 2024",
    status: "closed",
    startDate: new Date("2024-10-01"),
    endDate: new Date("2024-10-31"),
    totalEmployees: 43,
    importedEmployees: 43,
    validatedEmployees: 43,
    totalErrors: 0,
    totalWarnings: 0,
    createdBy: "Marie Dubois",
    createdAt: new Date("2024-10-01"),
    closedBy: "Jean Martin",
    closedAt: new Date("2024-10-28"),
  },
];

// Mock Coherence Checks
const mockCoherenceChecks: CoherenceCheck[] = [
  {
    id: "check-1",
    employeeId: "EMP001",
    employeeName: "Jean Dupont",
    checkType: "error",
    category: "hours",
    message: "Heures totales dépassent le maximum légal",
    details: "Total de 210h pour le mois dépasse le maximum de 169h + 48h sup",
    expectedValue: 217,
    actualValue: 210,
    resolved: false,
  },
  {
    id: "check-2",
    employeeId: "EMP003",
    employeeName: "Sophie Martin",
    checkType: "warning",
    category: "absences",
    message: "Congés payés non saisis",
    details: "Aucune donnée d'absence importée depuis le module RH",
    resolved: false,
  },
  {
    id: "check-3",
    employeeId: "EMP005",
    employeeName: "Thomas Bernard",
    checkType: "error",
    category: "contract",
    message: "Type de contrat manquant",
    details: "Impossible de calculer les cotisations sans type de contrat",
    resolved: false,
  },
];

// Mock Employee Payroll Variables
export const mockEmployeePayrollVariables: EmployeePayrollVariables[] = [
  {
    id: "var-2024-12-001",
    employeeId: "EMP001",
    employeeName: "Jean Dupont",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "CDI",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 151.67,
      nightHours: 32,
      holidayHours: 8,
      overtimeHours25: 10,
      overtimeHours50: 8,
      sundayHours: 16,
      sundayNightHours: 0,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 22,
      travelAllowances: 15,
      dressingAllowances: 22,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: false,
    hasErrors: true,
    hasWarnings: false,
    coherenceChecks: [mockCoherenceChecks[0]],
    lastModifiedBy: "System",
    lastModifiedAt: new Date("2024-12-01T11:00:00"),
  },
  {
    id: "var-2024-12-002",
    employeeId: "EMP002",
    employeeName: "Marie Leroux",
    period: "2024-12",
    position: "Chef d'équipe",
    contractType: "CDI",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 151.67,
      nightHours: 24,
      holidayHours: 0,
      overtimeHours25: 5,
      overtimeHours50: 0,
      sundayHours: 8,
      sundayNightHours: 0,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 22,
      travelAllowances: 12,
      dressingAllowances: 22,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 8,
      salaryDeductions: 0,
    },
    validated: true,
    validatedBy: "Marie Dubois",
    validatedAt: new Date("2024-12-02T14:20:00"),
    hasErrors: false,
    hasWarnings: false,
    coherenceChecks: [],
  },
  {
    id: "var-2024-12-003",
    employeeId: "EMP003",
    employeeName: "Sophie Martin",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "CDI",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "pending",
    externalImportStatus: "pending",
    planningData: {
      normalHours: 151.67,
      nightHours: 40,
      holidayHours: 8,
      overtimeHours25: 0,
      overtimeHours50: 0,
      sundayHours: 8,
      sundayNightHours: 8,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 22,
      travelAllowances: 18,
      dressingAllowances: 22,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: false,
    hasErrors: false,
    hasWarnings: true,
    coherenceChecks: [mockCoherenceChecks[1]],
    lastModifiedBy: "System",
    lastModifiedAt: new Date("2024-12-01T10:30:00"),
  },
  {
    id: "var-2024-12-004",
    employeeId: "EMP004",
    employeeName: "Pierre Dubois",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "CDD",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 130,
      nightHours: 16,
      holidayHours: 0,
      overtimeHours25: 0,
      overtimeHours50: 0,
      sundayHours: 0,
      sundayNightHours: 0,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 18,
      travelAllowances: 10,
      dressingAllowances: 18,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 3,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 1,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: true,
    validatedBy: "Marie Dubois",
    validatedAt: new Date("2024-12-02T14:25:00"),
    hasErrors: false,
    hasWarnings: false,
    coherenceChecks: [],
  },
  {
    id: "var-2024-12-005",
    employeeId: "EMP005",
    employeeName: "Thomas Bernard",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "CDI",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 151.67,
      nightHours: 28,
      holidayHours: 8,
      overtimeHours25: 12,
      overtimeHours50: 4,
      sundayHours: 8,
      sundayNightHours: 0,
      holidayNightHours: 8,
      onCallHours: 0,
      mealAllowances: 22,
      travelAllowances: 14,
      dressingAllowances: 22,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: false,
    hasErrors: true,
    hasWarnings: false,
    coherenceChecks: [mockCoherenceChecks[2]],
    lastModifiedBy: "System",
    lastModifiedAt: new Date("2024-12-01T11:00:00"),
  },
  {
    id: "var-2024-12-006",
    employeeId: "EMP006",
    employeeName: "Julie Petit",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "CDI",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 151.67,
      nightHours: 36,
      holidayHours: 0,
      overtimeHours25: 8,
      overtimeHours50: 0,
      sundayHours: 16,
      sundayNightHours: 8,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 22,
      travelAllowances: 16,
      dressingAllowances: 22,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: true,
    validatedBy: "Marie Dubois",
    validatedAt: new Date("2024-12-02T14:30:00"),
    hasErrors: false,
    hasWarnings: false,
    coherenceChecks: [],
  },
  {
    id: "var-2024-12-007",
    employeeId: "EMP007",
    employeeName: "Luc Moreau",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "CDD",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 140,
      nightHours: 20,
      holidayHours: 0,
      overtimeHours25: 0,
      overtimeHours50: 0,
      sundayHours: 8,
      sundayNightHours: 0,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 20,
      travelAllowances: 11,
      dressingAllowances: 20,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 5,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: true,
    validatedBy: "Marie Dubois",
    validatedAt: new Date("2024-12-02T14:35:00"),
    hasErrors: false,
    hasWarnings: false,
    coherenceChecks: [],
  },
  {
    id: "var-2024-12-008",
    employeeId: "EMP008",
    employeeName: "Claire Rousseau",
    period: "2024-12",
    position: "Chef d'équipe",
    contractType: "CDI",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 151.67,
      nightHours: 20,
      holidayHours: 0,
      overtimeHours25: 6,
      overtimeHours50: 0,
      sundayHours: 8,
      sundayNightHours: 0,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 22,
      travelAllowances: 13,
      dressingAllowances: 22,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 4,
      salaryDeductions: 0,
    },
    validated: true,
    validatedBy: "Marie Dubois",
    validatedAt: new Date("2024-12-02T14:40:00"),
    hasErrors: false,
    hasWarnings: false,
    coherenceChecks: [],
  },
  {
    id: "var-2024-12-009",
    employeeId: "EMP009",
    employeeName: "Antoine Girard",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "Intérim",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "imported",
    externalImportDate: new Date("2024-12-03T09:00:00"),
    planningData: {
      normalHours: 80,
      nightHours: 12,
      holidayHours: 0,
      overtimeHours25: 0,
      overtimeHours50: 0,
      sundayHours: 0,
      sundayNightHours: 0,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 11,
      travelAllowances: 6,
      dressingAllowances: 11,
      uniformAllowances: 0,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: true,
    validatedBy: "Marie Dubois",
    validatedAt: new Date("2024-12-03T10:15:00"),
    hasErrors: false,
    hasWarnings: false,
    coherenceChecks: [],
  },
  {
    id: "var-2024-12-010",
    employeeId: "EMP010",
    employeeName: "Nathalie Simon",
    period: "2024-12",
    position: "Agent de sécurité",
    contractType: "CDI",
    planningImportStatus: "imported",
    planningImportDate: new Date("2024-12-01T10:30:00"),
    hrImportStatus: "imported",
    hrImportDate: new Date("2024-12-01T11:00:00"),
    externalImportStatus: "pending",
    planningData: {
      normalHours: 151.67,
      nightHours: 30,
      holidayHours: 8,
      overtimeHours25: 4,
      overtimeHours50: 0,
      sundayHours: 8,
      sundayNightHours: 0,
      holidayNightHours: 0,
      onCallHours: 0,
      mealAllowances: 22,
      travelAllowances: 15,
      dressingAllowances: 22,
      uniformAllowances: 1,
    },
    hrData: {
      sickLeave: 0,
      workAccident: 0,
      paidLeave: 0,
      unpaidLeave: 0,
      exceptionalLeave: 0,
      maternityLeave: 0,
      paternityLeave: 0,
      unionHours: 0,
      salaryDeductions: 0,
    },
    validated: true,
    validatedBy: "Marie Dubois",
    validatedAt: new Date("2024-12-02T14:45:00"),
    hasErrors: false,
    hasWarnings: false,
    coherenceChecks: [],
  },
];

// Helper functions
export function getVariablesByPeriod(
  period: string,
): EmployeePayrollVariables[] {
  return mockEmployeePayrollVariables.filter((v) => v.period === period);
}

export function getVariableById(id: string): EmployeePayrollVariables | null {
  return mockEmployeePayrollVariables.find((v) => v.id === id) || null;
}

export function getVariableByEmployeeAndPeriod(
  employeeId: string,
  period: string,
): EmployeePayrollVariables | null {
  return (
    mockEmployeePayrollVariables.find(
      (v) => v.employeeId === employeeId && v.period === period,
    ) || null
  );
}

export function getPeriodById(id: string): PayrollPeriod | null {
  return mockPayrollPeriods.find((p) => p.id === id) || null;
}

export function getCurrentPeriod(): PayrollPeriod {
  return mockPayrollPeriods[0];
}

// Convert PayrollPeriod to Period format for PeriodSelector component
export function getPeriodsForSelector(): Period[] {
  return mockPayrollPeriods.map((p) => ({
    id: p.id,
    month: p.month,
    year: p.year,
    label: p.label,
  }));
}
